<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SlotLab â€” Unified Slot Preview + Stage Map (V3)</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0a0c;
            color: #e0e0e0;
            min-height: 100vh;
            overflow: hidden;
        }

        .container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           HEADER
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .header {
            background: #121216;
            padding: 10px 20px;
            border-bottom: 1px solid #2a2a30;
            display: flex;
            align-items: center;
            gap: 20px;
            flex-shrink: 0;
        }

        .logo { font-size: 16px; font-weight: 700; color: #4a9eff; }
        .header-spacer { flex: 1; }

        .mode-toggle {
            display: flex;
            background: #1a1a20;
            border-radius: 6px;
            overflow: hidden;
        }

        .mode-btn {
            padding: 8px 16px;
            font-size: 12px;
            font-weight: 600;
            border: none;
            background: transparent;
            color: #666;
            cursor: pointer;
            transition: all 0.2s;
        }

        .mode-btn.active {
            background: #4a9eff;
            color: #fff;
        }

        .mode-btn:hover:not(.active) {
            background: #2a2a30;
            color: #888;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           MAIN LAYOUT
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .main-layout {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           AUDIO BROWSER
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .audio-browser {
            width: 220px;
            background: #121216;
            border-right: 1px solid #2a2a30;
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
        }

        .browser-header {
            padding: 10px 14px;
            background: #1a1a20;
            border-bottom: 1px solid #2a2a30;
            font-size: 11px;
            font-weight: 600;
            color: #888;
            text-transform: uppercase;
        }

        .browser-content {
            flex: 1;
            overflow-y: auto;
            padding: 6px;
        }

        .audio-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 10px;
            background: #1a1a20;
            border-radius: 5px;
            margin-bottom: 4px;
            cursor: grab;
            transition: all 0.15s;
            border: 1px solid transparent;
            font-size: 11px;
        }

        .audio-item:hover {
            background: #242430;
            border-color: #4a9eff40;
        }

        .audio-item.dragging {
            opacity: 0.5;
            border-color: #4a9eff;
        }

        .audio-icon {
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, #4a9eff20, #4a9eff40);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CENTER PANEL
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .center-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           STATE TABS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .state-tabs {
            display: flex;
            background: #0d0d10;
            border-bottom: 2px solid #2a2a30;
            padding: 0 10px;
            flex-shrink: 0;
        }

        .state-tab {
            padding: 12px 20px;
            font-size: 12px;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 3px solid transparent;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .state-tab:hover { color: #888; background: #1a1a2020; }

        .state-tab.active {
            color: #4a9eff;
            border-bottom-color: #4a9eff;
            background: #4a9eff10;
        }

        .state-tab .icon { font-size: 16px; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SLOT PREVIEW AREA
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .slot-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background: linear-gradient(180deg, #0d0d10 0%, #121216 100%);
            position: relative;
            overflow: hidden;
        }

        .edit-mode-indicator {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: #ff904080;
            color: #fff;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            display: none;
        }

        .edit-mode .edit-mode-indicator { display: block; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SLOT MACHINE
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .slot-machine {
            background: linear-gradient(180deg, #1a1a20 0%, #121216 100%);
            border-radius: 16px;
            padding: 20px;
            border: 2px solid #2a2a30;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }

        /* Reels Container */
        .reels-container {
            display: flex;
            gap: 6px;
            padding: 15px;
            background: #0a0a0c;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .reel {
            width: 70px;
            height: 160px;
            background: linear-gradient(180deg, #1a1a20 0%, #0d0d10 50%, #1a1a20 100%);
            border-radius: 6px;
            overflow: hidden;
            position: relative;
            transition: all 0.2s;
        }

        /* Edit mode styling */
        .edit-mode .reel {
            border: 2px dashed #4a9eff60;
            cursor: pointer;
        }

        .edit-mode .reel:hover {
            border-color: #4a9eff;
            background: linear-gradient(180deg, #4a9eff10 0%, #4a9eff05 50%, #4a9eff10 100%);
            box-shadow: 0 0 20px #4a9eff30;
        }

        .edit-mode .reel.drop-target {
            border-color: #40ff90;
            border-style: solid;
            background: linear-gradient(180deg, #40ff9020 0%, #40ff9010 50%, #40ff9020 100%);
        }

        .edit-mode .reel.has-audio {
            border-color: #40ff90;
            border-style: solid;
        }

        .reel-strip {
            display: flex;
            flex-direction: column;
            transition: transform 0.1s linear;
        }

        .reel.spinning .reel-strip {
            animation: spin 0.1s linear infinite;
        }

        @keyframes spin {
            0% { transform: translateY(0); }
            100% { transform: translateY(-54px); }
        }

        .symbol {
            width: 70px;
            height: 54px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            background: #242430;
            border-bottom: 1px solid #1a1a20;
        }

        .reel-label {
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 9px;
            color: #666;
        }

        /* Controls */
        .controls {
            display: flex;
            gap: 10px;
            align-items: center;
            justify-content: center;
        }

        .control-btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            border: 2px solid #3a3a40;
            background: #1a1a20;
            color: #888;
            cursor: pointer;
            transition: all 0.2s;
        }

        .control-btn.spin-btn {
            padding: 16px 50px;
            font-size: 16px;
            background: linear-gradient(135deg, #4a9eff30, #4a9eff10);
            border-color: #4a9eff60;
            color: #4a9eff;
        }

        .control-btn.spin-btn:hover {
            background: linear-gradient(135deg, #4a9eff50, #4a9eff20);
            border-color: #4a9eff;
        }

        .control-btn.spin-btn:active {
            transform: scale(0.98);
        }

        .edit-mode .control-btn {
            border-style: dashed;
        }

        .edit-mode .control-btn:hover {
            border-color: #4a9eff;
            box-shadow: 0 0 15px #4a9eff30;
        }

        .edit-mode .control-btn.has-audio {
            border-color: #40ff90;
            border-style: solid;
        }

        /* Win Display */
        .win-display {
            text-align: center;
            margin-top: 15px;
            padding: 10px 30px;
            background: #0a0a0c;
            border-radius: 8px;
            min-width: 200px;
            transition: all 0.2s;
        }

        .win-label { font-size: 10px; color: #666; text-transform: uppercase; }
        .win-amount { font-size: 24px; font-weight: 700; color: #ffcc00; }

        .edit-mode .win-display {
            border: 2px dashed #ff904060;
        }

        .edit-mode .win-display:hover {
            border-color: #ff9040;
            box-shadow: 0 0 15px #ff904030;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FREE SPINS SCREEN
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .fs-screen {
            display: none;
        }

        .fs-screen.active { display: block; }

        .fs-header {
            text-align: center;
            margin-bottom: 15px;
        }

        .fs-title {
            font-size: 24px;
            font-weight: 700;
            color: #ffcc00;
            text-shadow: 0 0 20px #ffcc0050;
        }

        .fs-counter {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 10px;
        }

        .fs-count-item {
            text-align: center;
            padding: 10px 20px;
            background: #1a1a20;
            border-radius: 8px;
            transition: all 0.2s;
        }

        .edit-mode .fs-count-item {
            border: 2px dashed #4a9eff60;
        }

        .edit-mode .fs-count-item:hover {
            border-color: #4a9eff;
        }

        .fs-count-label { font-size: 10px; color: #666; }
        .fs-count-value { font-size: 28px; font-weight: 700; color: #4a9eff; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           HOLD & WIN SCREEN
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .hw-screen { display: none; }
        .hw-screen.active { display: block; }

        .hw-grid {
            display: grid;
            grid-template-columns: repeat(5, 60px);
            grid-template-rows: repeat(3, 60px);
            gap: 6px;
            padding: 15px;
            background: #0a0a0c;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .hw-cell {
            background: #1a1a20;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .hw-cell.locked {
            background: linear-gradient(135deg, #ffcc0030, #ffcc0010);
            border-color: #ffcc00;
        }

        .edit-mode .hw-cell {
            border: 2px dashed #4a9eff40;
        }

        .edit-mode .hw-cell:hover {
            border-color: #4a9eff;
        }

        .hw-respins {
            text-align: center;
            padding: 10px;
            background: #1a1a20;
            border-radius: 8px;
        }

        .hw-respins-label { font-size: 10px; color: #666; }
        .hw-respins-value { font-size: 32px; font-weight: 700; color: #ff4040; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           BONUS SCREEN
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .bonus-screen { display: none; }
        .bonus-screen.active { display: block; }

        .bonus-title {
            font-size: 20px;
            font-weight: 700;
            color: #ff40ff;
            text-align: center;
            margin-bottom: 15px;
        }

        .pick-grid {
            display: grid;
            grid-template-columns: repeat(4, 80px);
            grid-template-rows: repeat(2, 80px);
            gap: 10px;
            justify-content: center;
        }

        .pick-item {
            background: linear-gradient(135deg, #1a1a20, #242430);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid #3a3a40;
        }

        .pick-item:hover {
            transform: scale(1.05);
            border-color: #ff40ff;
        }

        .edit-mode .pick-item {
            border-style: dashed;
            border-color: #ff40ff60;
        }

        .edit-mode .pick-item:hover {
            border-color: #ff40ff;
            box-shadow: 0 0 20px #ff40ff30;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           JACKPOT SCREEN
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .jackpot-screen { display: none; }
        .jackpot-screen.active { display: block; text-align: center; }

        .jackpot-celebration {
            font-size: 48px;
            font-weight: 900;
            color: #ffcc00;
            text-shadow: 0 0 30px #ffcc0080;
            animation: pulse 0.5s ease-in-out infinite alternate;
        }

        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }

        .jackpot-amount {
            font-size: 64px;
            font-weight: 900;
            color: #fff;
            margin: 20px 0;
        }

        .jackpot-tiers {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }

        .jp-tier {
            padding: 15px 25px;
            border-radius: 10px;
            text-align: center;
            transition: all 0.2s;
        }

        .jp-tier.mini { background: #40c8ff20; border: 2px solid #40c8ff; }
        .jp-tier.minor { background: #40ff9020; border: 2px solid #40ff90; }
        .jp-tier.major { background: #ff904020; border: 2px solid #ff9040; }
        .jp-tier.grand { background: #ff40ff20; border: 2px solid #ff40ff; }

        .edit-mode .jp-tier { border-style: dashed; }
        .edit-mode .jp-tier:hover { box-shadow: 0 0 20px currentColor; }

        .jp-tier-name { font-size: 12px; font-weight: 600; }
        .jp-tier-value { font-size: 18px; font-weight: 700; margin-top: 5px; }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TRANSITION ZONES
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .transition-zones {
            display: flex;
            gap: 8px;
            margin-top: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .transition-zone {
            padding: 8px 14px;
            background: #1a1a20;
            border: 2px dashed #3a3a40;
            border-radius: 6px;
            font-size: 10px;
            color: #666;
            cursor: pointer;
            transition: all 0.2s;
        }

        .transition-zone:hover {
            border-color: #4a9eff;
            color: #4a9eff;
        }

        .transition-zone.has-audio {
            border-color: #40ff90;
            border-style: solid;
            color: #40ff90;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TIMELINE
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .timeline-panel {
            height: 180px;
            background: #0d0d10;
            border-top: 2px solid #2a2a30;
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
        }

        .timeline-header {
            display: flex;
            padding: 8px 12px;
            background: #121216;
            border-bottom: 1px solid #2a2a30;
            gap: 10px;
            align-items: center;
        }

        .timeline-title {
            font-size: 11px;
            font-weight: 600;
            color: #888;
        }

        .timeline-state-badge {
            padding: 3px 10px;
            background: #4a9eff20;
            color: #4a9eff;
            border-radius: 10px;
            font-size: 10px;
            font-weight: 600;
        }

        .timeline-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .time-ruler {
            height: 20px;
            background: #1a1a20;
            display: flex;
            padding-left: 100px;
            align-items: center;
            border-bottom: 1px solid #2a2a30;
        }

        .time-marker {
            width: 80px;
            font-size: 9px;
            color: #666;
        }

        .timeline-tracks {
            flex: 1;
            overflow-y: auto;
        }

        .timeline-track {
            display: flex;
            height: 40px;
            border-bottom: 1px solid #1a1a20;
        }

        .track-header {
            width: 100px;
            background: #121216;
            border-right: 1px solid #2a2a30;
            padding: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .track-name { font-size: 10px; color: #e0e0e0; }
        .track-meta { font-size: 8px; color: #666; }

        .track-content {
            flex: 1;
            position: relative;
            background: repeating-linear-gradient(90deg, #0d0d10 0px, #0d0d10 79px, #1a1a2040 79px, #1a1a2040 80px);
        }

        .audio-clip {
            position: absolute;
            top: 5px;
            height: 30px;
            background: linear-gradient(180deg, #4a9eff40 0%, #4a9eff20 100%);
            border: 1px solid #4a9eff;
            border-radius: 3px;
            padding: 0 6px;
            font-size: 9px;
            color: #fff;
            display: flex;
            align-items: center;
            cursor: move;
        }

        .empty-timeline {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #444;
            font-size: 12px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           NOTIFICATIONS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .notification {
            position: fixed;
            bottom: 200px;
            left: 50%;
            transform: translateX(-50%);
            background: #40ff90;
            color: #000;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            display: none;
            z-index: 1000;
        }

        .notification.visible {
            display: block;
            animation: popIn 0.3s ease-out;
        }

        @keyframes popIn {
            0% { transform: translateX(-50%) scale(0.8); opacity: 0; }
            100% { transform: translateX(-50%) scale(1); opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">FluxForge SlotLab</div>
            <div class="header-spacer"></div>
            <div class="mode-toggle">
                <button class="mode-btn active" data-mode="play">â–¶ PLAY</button>
                <button class="mode-btn" data-mode="edit">âœï¸ EDIT</button>
            </div>
        </div>

        <div class="main-layout">
            <!-- Audio Browser -->
            <div class="audio-browser">
                <div class="browser-header">ğŸ“ Audio Files</div>
                <div class="browser-content">
                    <div class="audio-item" draggable="true" data-audio="spin_whoosh.wav"><div class="audio-icon">ğŸµ</div>spin_whoosh.wav</div>
                    <div class="audio-item" draggable="true" data-audio="reel_stop.wav"><div class="audio-icon">ğŸµ</div>reel_stop.wav</div>
                    <div class="audio-item" draggable="true" data-audio="win_small.wav"><div class="audio-icon">ğŸµ</div>win_small.wav</div>
                    <div class="audio-item" draggable="true" data-audio="win_big.wav"><div class="audio-icon">ğŸµ</div>win_big.wav</div>
                    <div class="audio-item" draggable="true" data-audio="fs_trigger.wav"><div class="audio-icon">â­</div>fs_trigger.wav</div>
                    <div class="audio-item" draggable="true" data-audio="fs_spin.wav"><div class="audio-icon">â­</div>fs_spin.wav</div>
                    <div class="audio-item" draggable="true" data-audio="hold_lock.wav"><div class="audio-icon">ğŸ”’</div>hold_lock.wav</div>
                    <div class="audio-item" draggable="true" data-audio="bonus_pick.wav"><div class="audio-icon">ğŸ</div>bonus_pick.wav</div>
                    <div class="audio-item" draggable="true" data-audio="jackpot.wav"><div class="audio-icon">ğŸ‘‘</div>jackpot.wav</div>
                    <div class="audio-item" draggable="true" data-audio="transition.wav"><div class="audio-icon">ğŸ”„</div>transition.wav</div>
                </div>
            </div>

            <!-- Center Panel -->
            <div class="center-panel">
                <!-- State Tabs -->
                <div class="state-tabs">
                    <div class="state-tab active" data-state="base">
                        <span class="icon">ğŸ°</span> BASE GAME
                    </div>
                    <div class="state-tab" data-state="freespins">
                        <span class="icon">â­</span> FREE SPINS
                    </div>
                    <div class="state-tab" data-state="holdwin">
                        <span class="icon">ğŸ”’</span> HOLD & WIN
                    </div>
                    <div class="state-tab" data-state="bonus">
                        <span class="icon">ğŸ</span> BONUS
                    </div>
                    <div class="state-tab" data-state="jackpot">
                        <span class="icon">ğŸ‘‘</span> JACKPOT
                    </div>
                </div>

                <!-- Slot Area -->
                <div class="slot-area" id="slotArea">
                    <div class="edit-mode-indicator">âœï¸ EDIT MODE â€” Drop audio on elements</div>

                    <!-- BASE GAME SCREEN -->
                    <div class="slot-machine base-screen active" id="baseScreen">
                        <div class="reels-container">
                            <div class="reel" data-target="reel-0" data-stage="REEL_STOP_0">
                                <div class="reel-strip">
                                    <div class="symbol">ğŸ’</div>
                                    <div class="symbol">ğŸ‹</div>
                                    <div class="symbol">ğŸŠ</div>
                                    <div class="symbol">â­</div>
                                    <div class="symbol">ğŸ’</div>
                                </div>
                                <div class="reel-label">Reel 0</div>
                            </div>
                            <div class="reel" data-target="reel-1" data-stage="REEL_STOP_1">
                                <div class="reel-strip">
                                    <div class="symbol">â­</div>
                                    <div class="symbol">ğŸ’</div>
                                    <div class="symbol">7ï¸âƒ£</div>
                                    <div class="symbol">ğŸ’</div>
                                    <div class="symbol">ğŸ‹</div>
                                </div>
                                <div class="reel-label">Reel 1</div>
                            </div>
                            <div class="reel" data-target="reel-2" data-stage="REEL_STOP_2">
                                <div class="reel-strip">
                                    <div class="symbol">ğŸ‡</div>
                                    <div class="symbol">ğŸ””</div>
                                    <div class="symbol">ğŸ€</div>
                                    <div class="symbol">ğŸ’</div>
                                    <div class="symbol">â­</div>
                                </div>
                                <div class="reel-label">Reel 2</div>
                            </div>
                            <div class="reel" data-target="reel-3" data-stage="REEL_STOP_3">
                                <div class="reel-strip">
                                    <div class="symbol">ğŸ’</div>
                                    <div class="symbol">â­</div>
                                    <div class="symbol">ğŸ’</div>
                                    <div class="symbol">7ï¸âƒ£</div>
                                    <div class="symbol">ğŸ””</div>
                                </div>
                                <div class="reel-label">Reel 3</div>
                            </div>
                            <div class="reel" data-target="reel-4" data-stage="REEL_STOP_4">
                                <div class="reel-strip">
                                    <div class="symbol">7ï¸âƒ£</div>
                                    <div class="symbol">ğŸ‹</div>
                                    <div class="symbol">ğŸ””</div>
                                    <div class="symbol">ğŸ‡</div>
                                    <div class="symbol">ğŸ€</div>
                                </div>
                                <div class="reel-label">Reel 4</div>
                            </div>
                        </div>

                        <div class="controls">
                            <button class="control-btn" data-target="turbo" data-stage="SPIN_TURBO">âš¡ Turbo</button>
                            <button class="control-btn spin-btn" data-target="spin" data-stage="SPIN_START" id="spinBtn">ğŸ° SPIN</button>
                            <button class="control-btn" data-target="auto" data-stage="UI_AUTOPLAY">ğŸ”„ Auto</button>
                        </div>

                        <div class="win-display" data-target="win" data-stage="WIN_PRESENT">
                            <div class="win-label">WIN</div>
                            <div class="win-amount" id="winAmount">0.00</div>
                        </div>
                    </div>

                    <!-- FREE SPINS SCREEN -->
                    <div class="slot-machine fs-screen" id="fsScreen">
                        <div class="fs-header">
                            <div class="fs-title" data-target="fs-title" data-stage="FS_TRIGGER">â­ FREE SPINS â­</div>
                            <div class="fs-counter">
                                <div class="fs-count-item" data-target="fs-remaining" data-stage="FS_SPIN_COUNTER">
                                    <div class="fs-count-label">REMAINING</div>
                                    <div class="fs-count-value">10</div>
                                </div>
                                <div class="fs-count-item" data-target="fs-multiplier" data-stage="FS_MULTIPLIER_UP">
                                    <div class="fs-count-label">MULTIPLIER</div>
                                    <div class="fs-count-value">3x</div>
                                </div>
                                <div class="fs-count-item" data-target="fs-total-win" data-stage="FS_WIN">
                                    <div class="fs-count-label">TOTAL WIN</div>
                                    <div class="fs-count-value">$125</div>
                                </div>
                            </div>
                        </div>
                        <div class="reels-container">
                            <!-- Same reels structure with FS-specific stages -->
                            <div class="reel" data-target="fs-reel-0" data-stage="FS_REEL_STOP_0"><div class="reel-strip"><div class="symbol">â­</div><div class="symbol">ğŸ’</div><div class="symbol">â­</div></div></div>
                            <div class="reel" data-target="fs-reel-1" data-stage="FS_REEL_STOP_1"><div class="reel-strip"><div class="symbol">ğŸ’</div><div class="symbol">â­</div><div class="symbol">7ï¸âƒ£</div></div></div>
                            <div class="reel" data-target="fs-reel-2" data-stage="FS_REEL_STOP_2"><div class="reel-strip"><div class="symbol">â­</div><div class="symbol">â­</div><div class="symbol">ğŸ’</div></div></div>
                            <div class="reel" data-target="fs-reel-3" data-stage="FS_REEL_STOP_3"><div class="reel-strip"><div class="symbol">7ï¸âƒ£</div><div class="symbol">ğŸ’</div><div class="symbol">â­</div></div></div>
                            <div class="reel" data-target="fs-reel-4" data-stage="FS_REEL_STOP_4"><div class="reel-strip"><div class="symbol">ğŸ’</div><div class="symbol">â­</div><div class="symbol">7ï¸âƒ£</div></div></div>
                        </div>
                        <div class="controls">
                            <button class="control-btn spin-btn" data-target="fs-spin" data-stage="FS_SPIN">â­ SPIN</button>
                        </div>
                    </div>

                    <!-- HOLD & WIN SCREEN -->
                    <div class="slot-machine hw-screen" id="hwScreen">
                        <div class="fs-title" style="color: #ff9040; margin-bottom: 15px;" data-target="hw-title" data-stage="HOLD_TRIGGER">ğŸ”’ HOLD & WIN ğŸ”’</div>
                        <div class="hw-grid">
                            <div class="hw-cell" data-target="hw-cell-0" data-stage="HOLD_SYMBOL_LOCK">ğŸ’</div>
                            <div class="hw-cell" data-target="hw-cell-1" data-stage="HOLD_SYMBOL_LOCK"></div>
                            <div class="hw-cell locked" data-target="hw-cell-2" data-stage="HOLD_SYMBOL_LOCK">$50</div>
                            <div class="hw-cell" data-target="hw-cell-3" data-stage="HOLD_SYMBOL_LOCK"></div>
                            <div class="hw-cell locked" data-target="hw-cell-4" data-stage="HOLD_SYMBOL_LOCK">$25</div>
                            <div class="hw-cell" data-target="hw-cell-5" data-stage="HOLD_SYMBOL_LOCK"></div>
                            <div class="hw-cell locked" data-target="hw-cell-6" data-stage="HOLD_SYMBOL_LOCK">$100</div>
                            <div class="hw-cell" data-target="hw-cell-7" data-stage="HOLD_SYMBOL_LOCK"></div>
                            <div class="hw-cell" data-target="hw-cell-8" data-stage="HOLD_SYMBOL_LOCK"></div>
                            <div class="hw-cell locked" data-target="hw-cell-9" data-stage="HOLD_SYMBOL_LOCK">MINI</div>
                            <div class="hw-cell" data-target="hw-cell-10" data-stage="HOLD_SYMBOL_LOCK"></div>
                            <div class="hw-cell locked" data-target="hw-cell-11" data-stage="HOLD_SYMBOL_LOCK">$75</div>
                            <div class="hw-cell" data-target="hw-cell-12" data-stage="HOLD_SYMBOL_LOCK"></div>
                            <div class="hw-cell" data-target="hw-cell-13" data-stage="HOLD_SYMBOL_LOCK"></div>
                            <div class="hw-cell" data-target="hw-cell-14" data-stage="HOLD_SYMBOL_LOCK"></div>
                        </div>
                        <div class="hw-respins" data-target="hw-respins" data-stage="HOLD_RESPIN_COUNTER">
                            <div class="hw-respins-label">RESPINS</div>
                            <div class="hw-respins-value">3</div>
                        </div>
                    </div>

                    <!-- BONUS SCREEN -->
                    <div class="slot-machine bonus-screen" id="bonusScreen">
                        <div class="bonus-title" data-target="bonus-title" data-stage="BONUS_TRIGGER">ğŸ PICK A PRIZE! ğŸ</div>
                        <div class="pick-grid">
                            <div class="pick-item" data-target="pick-0" data-stage="PICK_SELECT">ğŸ</div>
                            <div class="pick-item" data-target="pick-1" data-stage="PICK_SELECT">ğŸ</div>
                            <div class="pick-item" data-target="pick-2" data-stage="PICK_SELECT">ğŸ</div>
                            <div class="pick-item" data-target="pick-3" data-stage="PICK_SELECT">ğŸ</div>
                            <div class="pick-item" data-target="pick-4" data-stage="PICK_SELECT">ğŸ</div>
                            <div class="pick-item" data-target="pick-5" data-stage="PICK_SELECT">ğŸ</div>
                            <div class="pick-item" data-target="pick-6" data-stage="PICK_SELECT">ğŸ</div>
                            <div class="pick-item" data-target="pick-7" data-stage="PICK_SELECT">ğŸ</div>
                        </div>
                    </div>

                    <!-- JACKPOT SCREEN -->
                    <div class="slot-machine jackpot-screen" id="jackpotScreen">
                        <div class="jackpot-celebration" data-target="jp-celebration" data-stage="JACKPOT_TRIGGER">ğŸ‰ JACKPOT! ğŸ‰</div>
                        <div class="jackpot-amount" data-target="jp-amount" data-stage="JACKPOT_ROLLUP">$50,000</div>
                        <div class="jackpot-tiers">
                            <div class="jp-tier mini" data-target="jp-mini" data-stage="JACKPOT_MINI">
                                <div class="jp-tier-name">MINI</div>
                                <div class="jp-tier-value">$100</div>
                            </div>
                            <div class="jp-tier minor" data-target="jp-minor" data-stage="JACKPOT_MINOR">
                                <div class="jp-tier-name">MINOR</div>
                                <div class="jp-tier-value">$500</div>
                            </div>
                            <div class="jp-tier major" data-target="jp-major" data-stage="JACKPOT_MAJOR">
                                <div class="jp-tier-name">MAJOR</div>
                                <div class="jp-tier-value">$5,000</div>
                            </div>
                            <div class="jp-tier grand" data-target="jp-grand" data-stage="JACKPOT_GRAND">
                                <div class="jp-tier-name">GRAND</div>
                                <div class="jp-tier-value">$50,000</div>
                            </div>
                        </div>
                    </div>

                    <!-- Transition Zones -->
                    <div class="transition-zones">
                        <div class="transition-zone" data-target="trans-base-fs" data-stage="FS_TRANSITION_IN">BASE â†’ FS</div>
                        <div class="transition-zone" data-target="trans-fs-base" data-stage="FS_TRANSITION_OUT">FS â†’ BASE</div>
                        <div class="transition-zone" data-target="trans-base-hw" data-stage="HOLD_ENTER">BASE â†’ H&W</div>
                        <div class="transition-zone" data-target="trans-hw-base" data-stage="HOLD_EXIT">H&W â†’ BASE</div>
                        <div class="transition-zone" data-target="trans-base-bonus" data-stage="BONUS_ENTER">BASE â†’ BONUS</div>
                        <div class="transition-zone" data-target="trans-bonus-base" data-stage="BONUS_EXIT">BONUS â†’ BASE</div>
                    </div>
                </div>

                <!-- Timeline -->
                <div class="timeline-panel">
                    <div class="timeline-header">
                        <div class="timeline-title">TIMELINE</div>
                        <div class="timeline-state-badge" id="timelineStateBadge">BASE GAME</div>
                    </div>
                    <div class="timeline-content">
                        <div class="time-ruler">
                            <div class="time-marker">0:00</div>
                            <div class="time-marker">0:01</div>
                            <div class="time-marker">0:02</div>
                            <div class="time-marker">0:03</div>
                        </div>
                        <div class="timeline-tracks" id="timelineTracks">
                            <div class="empty-timeline" id="emptyTimeline">Drop audio on slot elements to create events</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="notification" id="notification"></div>

    <script>
        // State
        const state = {
            mode: 'play', // 'play' or 'edit'
            currentState: 'base',
            events: {},
            draggingAudio: null,
            isSpinning: false
        };

        const stateNames = {
            base: 'BASE GAME',
            freespins: 'FREE SPINS',
            holdwin: 'HOLD & WIN',
            bonus: 'BONUS',
            jackpot: 'JACKPOT'
        };

        // DOM
        const slotArea = document.getElementById('slotArea');
        const notification = document.getElementById('notification');
        const timelineTracks = document.getElementById('timelineTracks');
        const emptyTimeline = document.getElementById('emptyTimeline');
        const timelineStateBadge = document.getElementById('timelineStateBadge');

        // Mode Toggle
        document.querySelectorAll('.mode-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                state.mode = btn.dataset.mode;

                if (state.mode === 'edit') {
                    slotArea.classList.add('edit-mode');
                } else {
                    slotArea.classList.remove('edit-mode');
                }
            });
        });

        // State Tabs
        document.querySelectorAll('.state-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.state-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                state.currentState = tab.dataset.state;

                // Show/hide screens
                document.querySelectorAll('.slot-machine').forEach(s => s.classList.remove('active'));
                document.getElementById(getScreenId(state.currentState)).classList.add('active');

                // Update timeline badge
                timelineStateBadge.textContent = stateNames[state.currentState];

                // Update timeline
                renderTimeline();
            });
        });

        function getScreenId(stateName) {
            const map = {
                base: 'baseScreen',
                freespins: 'fsScreen',
                holdwin: 'hwScreen',
                bonus: 'bonusScreen',
                jackpot: 'jackpotScreen'
            };
            return map[stateName];
        }

        // Spin Button
        document.getElementById('spinBtn').addEventListener('click', () => {
            if (state.mode === 'play' && !state.isSpinning) {
                spin();
            }
        });

        function spin() {
            state.isSpinning = true;
            const reels = document.querySelectorAll('#baseScreen .reel');

            // Start spinning
            reels.forEach(reel => reel.classList.add('spinning'));

            // Stop reels one by one
            reels.forEach((reel, index) => {
                setTimeout(() => {
                    reel.classList.remove('spinning');
                    if (index === reels.length - 1) {
                        state.isSpinning = false;
                        // Random win
                        if (Math.random() > 0.5) {
                            document.getElementById('winAmount').textContent = (Math.random() * 100).toFixed(2);
                        }
                    }
                }, 1000 + index * 300);
            });
        }

        // Audio Drag & Drop
        document.querySelectorAll('.audio-item').forEach(item => {
            item.addEventListener('dragstart', () => {
                state.draggingAudio = item.dataset.audio;
                item.classList.add('dragging');
            });

            item.addEventListener('dragend', () => {
                item.classList.remove('dragging');
                state.draggingAudio = null;
                document.querySelectorAll('.drop-target').forEach(el => el.classList.remove('drop-target'));
            });
        });

        // Drop Targets
        document.querySelectorAll('[data-target]').forEach(target => {
            target.addEventListener('dragover', (e) => {
                if (state.mode === 'edit') {
                    e.preventDefault();
                    target.classList.add('drop-target');
                }
            });

            target.addEventListener('dragleave', () => {
                target.classList.remove('drop-target');
            });

            target.addEventListener('drop', (e) => {
                e.preventDefault();
                target.classList.remove('drop-target');

                if (state.mode === 'edit' && state.draggingAudio) {
                    const targetId = target.dataset.target;
                    const stage = target.dataset.stage;

                    // Add event
                    if (!state.events[state.currentState]) {
                        state.events[state.currentState] = [];
                    }

                    state.events[state.currentState].push({
                        id: Date.now(),
                        target: targetId,
                        stage: stage,
                        audio: state.draggingAudio,
                        offset: state.events[state.currentState].length * 60
                    });

                    target.classList.add('has-audio');

                    renderTimeline();
                    showNotification(`âœ… ${stage} â†’ ${state.draggingAudio}`);
                }
            });
        });

        function renderTimeline() {
            const events = state.events[state.currentState] || [];

            if (events.length === 0) {
                emptyTimeline.style.display = 'flex';
                timelineTracks.querySelectorAll('.timeline-track').forEach(t => t.remove());
            } else {
                emptyTimeline.style.display = 'none';
                timelineTracks.querySelectorAll('.timeline-track').forEach(t => t.remove());

                events.forEach(event => {
                    const track = document.createElement('div');
                    track.className = 'timeline-track';
                    track.innerHTML = `
                        <div class="track-header">
                            <div class="track-name">${event.stage}</div>
                            <div class="track-meta">${event.audio}</div>
                        </div>
                        <div class="track-content">
                            <div class="audio-clip" style="left: ${event.offset}px; width: 100px;">${event.audio}</div>
                        </div>
                    `;
                    timelineTracks.appendChild(track);
                });
            }
        }

        function showNotification(message) {
            notification.textContent = message;
            notification.classList.add('visible');
            setTimeout(() => notification.classList.remove('visible'), 2000);
        }

        // Init
        renderTimeline();
    </script>
</body>
</html>
